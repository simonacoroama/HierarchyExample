{"ast":null,"code":"import { shuffle, slice } from \"../array.js\";\nexport default function (circles) {\n  var i = 0,\n      n = (circles = shuffle(slice.call(circles))).length,\n      B = [],\n      p,\n      e;\n\n  while (i < n) {\n    p = circles[i];\n    if (e && enclosesWeak(e, p)) ++i;else e = encloseBasis(B = extendBasis(B, p)), i = 0;\n  }\n\n  return e;\n}\n\nfunction extendBasis(B, p) {\n  var i, j;\n  if (enclosesWeakAll(p, B)) return [p]; // If we get here then B must have at least one element.\n\n  for (i = 0; i < B.length; ++i) {\n    if (enclosesNot(p, B[i]) && enclosesWeakAll(encloseBasis2(B[i], p), B)) {\n      return [B[i], p];\n    }\n  } // If we get here then B must have at least two elements.\n\n\n  for (i = 0; i < B.length - 1; ++i) {\n    for (j = i + 1; j < B.length; ++j) {\n      if (enclosesNot(encloseBasis2(B[i], B[j]), p) && enclosesNot(encloseBasis2(B[i], p), B[j]) && enclosesNot(encloseBasis2(B[j], p), B[i]) && enclosesWeakAll(encloseBasis3(B[i], B[j], p), B)) {\n        return [B[i], B[j], p];\n      }\n    }\n  } // If we get here then something is very wrong.\n\n\n  throw new Error();\n}\n\nfunction enclosesNot(a, b) {\n  var dr = a.r - b.r,\n      dx = b.x - a.x,\n      dy = b.y - a.y;\n  return dr < 0 || dr * dr < dx * dx + dy * dy;\n}\n\nfunction enclosesWeak(a, b) {\n  var dr = a.r - b.r + 1e-6,\n      dx = b.x - a.x,\n      dy = b.y - a.y;\n  return dr > 0 && dr * dr > dx * dx + dy * dy;\n}\n\nfunction enclosesWeakAll(a, B) {\n  for (var i = 0; i < B.length; ++i) {\n    if (!enclosesWeak(a, B[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction encloseBasis(B) {\n  switch (B.length) {\n    case 1:\n      return encloseBasis1(B[0]);\n\n    case 2:\n      return encloseBasis2(B[0], B[1]);\n\n    case 3:\n      return encloseBasis3(B[0], B[1], B[2]);\n  }\n}\n\nfunction encloseBasis1(a) {\n  return {\n    x: a.x,\n    y: a.y,\n    r: a.r\n  };\n}\n\nfunction encloseBasis2(a, b) {\n  var x1 = a.x,\n      y1 = a.y,\n      r1 = a.r,\n      x2 = b.x,\n      y2 = b.y,\n      r2 = b.r,\n      x21 = x2 - x1,\n      y21 = y2 - y1,\n      r21 = r2 - r1,\n      l = Math.sqrt(x21 * x21 + y21 * y21);\n  return {\n    x: (x1 + x2 + x21 / l * r21) / 2,\n    y: (y1 + y2 + y21 / l * r21) / 2,\n    r: (l + r1 + r2) / 2\n  };\n}\n\nfunction encloseBasis3(a, b, c) {\n  var x1 = a.x,\n      y1 = a.y,\n      r1 = a.r,\n      x2 = b.x,\n      y2 = b.y,\n      r2 = b.r,\n      x3 = c.x,\n      y3 = c.y,\n      r3 = c.r,\n      a2 = x1 - x2,\n      a3 = x1 - x3,\n      b2 = y1 - y2,\n      b3 = y1 - y3,\n      c2 = r2 - r1,\n      c3 = r3 - r1,\n      d1 = x1 * x1 + y1 * y1 - r1 * r1,\n      d2 = d1 - x2 * x2 - y2 * y2 + r2 * r2,\n      d3 = d1 - x3 * x3 - y3 * y3 + r3 * r3,\n      ab = a3 * b2 - a2 * b3,\n      xa = (b2 * d3 - b3 * d2) / (ab * 2) - x1,\n      xb = (b3 * c2 - b2 * c3) / ab,\n      ya = (a3 * d2 - a2 * d3) / (ab * 2) - y1,\n      yb = (a2 * c3 - a3 * c2) / ab,\n      A = xb * xb + yb * yb - 1,\n      B = 2 * (r1 + xa * xb + ya * yb),\n      C = xa * xa + ya * ya - r1 * r1,\n      r = -(A ? (B + Math.sqrt(B * B - 4 * A * C)) / (2 * A) : C / B);\n  return {\n    x: x1 + xa + xb * r,\n    y: y1 + ya + yb * r,\n    r: r\n  };\n}","map":{"version":3,"names":["shuffle","slice","circles","i","n","call","length","B","p","e","enclosesWeak","encloseBasis","extendBasis","j","enclosesWeakAll","enclosesNot","encloseBasis2","encloseBasis3","Error","a","b","dr","r","dx","x","dy","y","encloseBasis1","x1","y1","r1","x2","y2","r2","x21","y21","r21","l","Math","sqrt","c","x3","y3","r3","a2","a3","b2","b3","c2","c3","d1","d2","d3","ab","xa","xb","ya","yb","A","C"],"sources":["C:/tasks/extra/HierarchyExample/HirarchyReact/hierarch/node_modules/d3-hierarchy/src/pack/enclose.js"],"sourcesContent":["import {shuffle, slice} from \"../array.js\";\r\n\r\nexport default function(circles) {\r\n  var i = 0, n = (circles = shuffle(slice.call(circles))).length, B = [], p, e;\r\n\r\n  while (i < n) {\r\n    p = circles[i];\r\n    if (e && enclosesWeak(e, p)) ++i;\r\n    else e = encloseBasis(B = extendBasis(B, p)), i = 0;\r\n  }\r\n\r\n  return e;\r\n}\r\n\r\nfunction extendBasis(B, p) {\r\n  var i, j;\r\n\r\n  if (enclosesWeakAll(p, B)) return [p];\r\n\r\n  // If we get here then B must have at least one element.\r\n  for (i = 0; i < B.length; ++i) {\r\n    if (enclosesNot(p, B[i])\r\n        && enclosesWeakAll(encloseBasis2(B[i], p), B)) {\r\n      return [B[i], p];\r\n    }\r\n  }\r\n\r\n  // If we get here then B must have at least two elements.\r\n  for (i = 0; i < B.length - 1; ++i) {\r\n    for (j = i + 1; j < B.length; ++j) {\r\n      if (enclosesNot(encloseBasis2(B[i], B[j]), p)\r\n          && enclosesNot(encloseBasis2(B[i], p), B[j])\r\n          && enclosesNot(encloseBasis2(B[j], p), B[i])\r\n          && enclosesWeakAll(encloseBasis3(B[i], B[j], p), B)) {\r\n        return [B[i], B[j], p];\r\n      }\r\n    }\r\n  }\r\n\r\n  // If we get here then something is very wrong.\r\n  throw new Error;\r\n}\r\n\r\nfunction enclosesNot(a, b) {\r\n  var dr = a.r - b.r, dx = b.x - a.x, dy = b.y - a.y;\r\n  return dr < 0 || dr * dr < dx * dx + dy * dy;\r\n}\r\n\r\nfunction enclosesWeak(a, b) {\r\n  var dr = a.r - b.r + 1e-6, dx = b.x - a.x, dy = b.y - a.y;\r\n  return dr > 0 && dr * dr > dx * dx + dy * dy;\r\n}\r\n\r\nfunction enclosesWeakAll(a, B) {\r\n  for (var i = 0; i < B.length; ++i) {\r\n    if (!enclosesWeak(a, B[i])) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction encloseBasis(B) {\r\n  switch (B.length) {\r\n    case 1: return encloseBasis1(B[0]);\r\n    case 2: return encloseBasis2(B[0], B[1]);\r\n    case 3: return encloseBasis3(B[0], B[1], B[2]);\r\n  }\r\n}\r\n\r\nfunction encloseBasis1(a) {\r\n  return {\r\n    x: a.x,\r\n    y: a.y,\r\n    r: a.r\r\n  };\r\n}\r\n\r\nfunction encloseBasis2(a, b) {\r\n  var x1 = a.x, y1 = a.y, r1 = a.r,\r\n      x2 = b.x, y2 = b.y, r2 = b.r,\r\n      x21 = x2 - x1, y21 = y2 - y1, r21 = r2 - r1,\r\n      l = Math.sqrt(x21 * x21 + y21 * y21);\r\n  return {\r\n    x: (x1 + x2 + x21 / l * r21) / 2,\r\n    y: (y1 + y2 + y21 / l * r21) / 2,\r\n    r: (l + r1 + r2) / 2\r\n  };\r\n}\r\n\r\nfunction encloseBasis3(a, b, c) {\r\n  var x1 = a.x, y1 = a.y, r1 = a.r,\r\n      x2 = b.x, y2 = b.y, r2 = b.r,\r\n      x3 = c.x, y3 = c.y, r3 = c.r,\r\n      a2 = x1 - x2,\r\n      a3 = x1 - x3,\r\n      b2 = y1 - y2,\r\n      b3 = y1 - y3,\r\n      c2 = r2 - r1,\r\n      c3 = r3 - r1,\r\n      d1 = x1 * x1 + y1 * y1 - r1 * r1,\r\n      d2 = d1 - x2 * x2 - y2 * y2 + r2 * r2,\r\n      d3 = d1 - x3 * x3 - y3 * y3 + r3 * r3,\r\n      ab = a3 * b2 - a2 * b3,\r\n      xa = (b2 * d3 - b3 * d2) / (ab * 2) - x1,\r\n      xb = (b3 * c2 - b2 * c3) / ab,\r\n      ya = (a3 * d2 - a2 * d3) / (ab * 2) - y1,\r\n      yb = (a2 * c3 - a3 * c2) / ab,\r\n      A = xb * xb + yb * yb - 1,\r\n      B = 2 * (r1 + xa * xb + ya * yb),\r\n      C = xa * xa + ya * ya - r1 * r1,\r\n      r = -(A ? (B + Math.sqrt(B * B - 4 * A * C)) / (2 * A) : C / B);\r\n  return {\r\n    x: x1 + xa + xb * r,\r\n    y: y1 + ya + yb * r,\r\n    r: r\r\n  };\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}